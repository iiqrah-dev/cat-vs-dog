(this["webpackJsonpcat-vs-dog"]=this["webpackJsonpcat-vs-dog"]||[]).push([[4],{1009:function(t,e){},1011:function(t,e){},1013:function(t,e){},1142:function(t,e){},1144:function(t,e){},1151:function(t,e){},1152:function(t,e){},1168:function(t,e){},1170:function(t,e){},1178:function(t,e){},1189:function(t,e){},1255:function(t,e,n){},1257:function(t,e,n){"use strict";n.r(e);var c=n(0),o=n.n(c),a=n(265),r=n.n(a),s=(n(621),n(9)),i=n(45),u=n(1),l=n.n(u),f=(n(622),n(221)),b=(n(1255),n(93)),d=n(6);var j=function(t){var e=t.perc,n=(t.setPerc,t.token),o=t.petemoji,a=Object(c.useState)(),r=Object(i.a)(a,2),u=r[0],j=r[1],p=Object(b.d)(),h=Object(b.b)().isAuthenticated;function v(t){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(l.a.mark((function t(e){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={contractAddress:"0xa2C467ec049f1F3C84ddd9744E70965aDbfAfBe0",functionName:"vote",abi:[{inputs:[{internalType:"string",name:"_pet",type:"string"},{internalType:"bool",name:"_vote",type:"bool"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],params:{_pet:n,_vote:e}},t.next=3,p.fetch({params:c,onSuccess:function(){console.log("vote succesful"),alert("Vote Succesful!")},onError:function(t){console.log("vote unsuccesful"),alert("Vote Unsuccesful :/ You have already voted once.")}});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){j(e<50?"#F72D44":"#D0E562")}),[e]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"petemoji",children:o}),Object(d.jsx)("div",{className:"token",children:n}),Object(d.jsxs)("div",{className:"circle",style:{boxShadow:"0 0 20px ".concat(u)},children:[Object(d.jsx)("div",{className:"wave",style:{marginTop:"".concat(100-e,"%"),boxShadow:"0 0 20px ".concat(u),backgroundColor:u}}),Object(d.jsxs)("div",{className:"percentage",children:[e,"%"]})]}),Object(d.jsxs)("div",{className:"votes",children:[Object(d.jsx)(f.a,{onClick:function(){h?v(!0):alert("Authenicate to Vote")},text:"Up",theme:"primary",type:"button"}),Object(d.jsx)(f.a,{color:"red",onClick:function(){try{h?v(!1):alert("Authenicate to Vote")}catch(t){alert("Authenicate to Vote")}},text:"Down",theme:"colored",type:"button"})]})]})})},p=function(){var t=Object(c.useState)(80),e=Object(i.a)(t,2),n=e[0],o=e[1],a=Object(c.useState)(30),r=Object(i.a)(a,2),u=r[0],p=r[1],h=(Object(b.c)(),Object(b.b)()),v=h.Moralis,m=h.isInitialized;function O(t,e){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(l.a.mark((function t(e,n){var c,o,a,r,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=v.Object.extend("Votes"),(o=new v.Query(c)).equalTo("pet",e),o.descending("createdAt"),t.next=6,o.first();case 6:a=t.sent,r=Number(a.attributes.up),s=Number(a.attributes.down),i=Math.round(r/(r+s)*100),n(i);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){if(m){var t=function(){var t=Object(s.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new v.Query("Votes"),t.next=3,e.subscribe();case 3:t.sent.on("update",(function(t){"Cat"===t.attributes.pet?O("Cat",o):"Dog"===t.attributes.ticker&&O("Dog",p)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();O("Cat",o),O("Dog",p),t()}}),[m]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"header",children:Object(d.jsx)(f.b,{})}),Object(d.jsx)("div",{className:"pollheading",children:"The Ultimate: Cat vs Dog Poll"}),Object(d.jsx)("div",{className:"instructions",children:"Which pet do you prefer? Vote now."}),Object(d.jsxs)("div",{className:"list",children:[Object(d.jsx)(j,{perc:n,setPerc:o,token:"Cat",petemoji:"\ud83d\ude3c"}),Object(d.jsx)(j,{perc:u,setPerc:p,token:"Dog",petemoji:"\ud83d\udc36"})]})]})},h=function(t){t&&t instanceof Function&&n.e(18).then(n.bind(null,1521)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),o(t),a(t),r(t)}))};r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(b.a,{appId:"1nQ2ns2B8ol4A85mY7L6azEOr1DkofNIcgko3Yfv",serverUrl:"https://had3wrolmufr.usemoralis.com:2053/server",children:Object(d.jsx)(p,{})})}),document.getElementById("root")),h()},621:function(t,e,n){},622:function(t,e,n){},887:function(t,e){},917:function(t,e){},957:function(t,e){},959:function(t,e){},979:function(t,e){},981:function(t,e){},993:function(t,e){}},[[1257,5,6]]]);
//# sourceMappingURL=main.0351678e.chunk.js.map